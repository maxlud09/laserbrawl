<!DOCTYPE html>
<html lang="de">
<title>Play4All</title>
	<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-TGESBRYGQ9"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

 		 gtag('config', 'G-TGESBRYGQ9');
	    // Erstellen Sie eine Referenz auf die Anzahl der Nutzer
	  </script>

<style>
marquee {
      	font-size: 24px;
      	color: red;
     	background-color: black;
    	}
	      
        table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
            background-color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }
        table, th, td {
            border: 1px solid #000;
            text-align: left;
        }
        th, td {
            padding: 10px;
        }
	#bar {
  color: red !important;
  background-color: black !important;
  font-family: Arial, sans-serif !important;
  font-size: 20px !important;
  padding: 10px !important;
  width: 100% !important;
  text-align: center !important;
}

/* Die Animation soll wie ein Würfel aussehen */
@keyframes cube {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(90deg);
  }
  100% {
    transform: rotateX(180deg);
  }
}

/* Die Animation soll alle 2 Sekunden wechseln */
.animate {
  animation: cube 2s infinite !important;
}

</style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- JavaScript-Bibliotheken -->
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-firestore.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
// Firebase-Konfiguration
var firebaseConfig = {
  apiKey: "AIzaSyBH_lgpYQtF0KHodq0DXdSOonchWJwMS4Y",
  authDomain: "cool-gg.firebaseapp.com",
  databaseURL: "https://cool-gg-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "cool-gg",
  storageBucket: "cool-gg.appspot.com",
  messagingSenderId: "135757861223",
  appId: "1:135757861223:web:95b00a581cb07df494dfc2",
  measurementId: "G-V74EHYKZK3"
};

// Firebase initialisieren
firebase.initializeApp(firebaseConfig);

// Auf Firestore zugreifen
var db = firebase.firestore();
var database = firebase.database();
</script>

    <!-- Favicon und Stylesheets -->
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/css/fontawsom-all.min.css">
<link rel="stylesheet" type="text/css" href="assets/css/style.css">
<link rel="stylesheet" type="text/css" href="assets/css/homebar/style.css">
<!-- JavaScript -->
<script src="assets/js/functions/time.js"></script>
<script src="assets/js/functions/vn.js"></script>
<script src="assets/firebase/script/script.js"></script>
<script src="assets/js/functions/script_index.js"></script>

<meta name="google-adsense-account" content="ca-pub-8703503301801933">
<script>
function runOncePerDay() {
    // Überprüfe, ob heute bereits ausgeführt wurde
    const lastRunDate = localStorage.getItem('lastRunDate');

    const today = new Date().toLocaleDateString();

    if (lastRunDate !== today) {
        // Führe die Funktion aus, da sie heute noch nicht aufgerufen wurde
        alert("Adventsklaender: Sichere dir wertvolle Prämien und lasse dich überraschen. Klicke einfach auf Adventskalender in der Homebar");

        // Aktualisiere den letzten Ausführungszeitpunkt im localStorage
        localStorage.setItem('lastRunDate', today);
    } else {
console.log("berreits ausgeführt")    
    }
}
</script>

</head>
<body class="h-100">
	<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFFJXGZF"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
	
    <!-- Login Fenster -->

	

    <div style="display: none;" id="loader" class="loader"></div>
<script src="assets/firebase/script/störungen.js"></script>
  <div id="bar"></div>

    <div id="login" class="container-fluid full-bg h-100">
        <div class="container h-100">
            <div class="row no-margin h-100">
                <div class="bg-layer d-flex col-md-4">
                    <div class="login-box row">
                        <h3>Login</h3>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-at"></i></span>
                            </div>
                            <input type="text" class="form-control" id="email" placeholder="E-Mail-Adresse" aria-label="Username" aria-describedby="basic-addon1" required>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-key"></i></span>
                            </div>
                            <input type="password" id="password" class="form-control" placeholder="Passwort" aria-label="Username" aria-describedby="basic-addon1" required>
                        </div>
                        <p>
                            <label class="container">
                                <input id="rememberMe" type="checkbox">
                                <span class="checkmark"></span> Angemeldet bleiben?
                            </label>
                        </p>
                        <p class="no-c">Passwort vergessen? <a onclick="passwordreset()">Hier klicken!</a></p>
                        <button onclick="login(); Save();" class="btn btn-success">Login</button>
                        <p class="no-c">Neu hier? <a href="signup.html">Hier klicken!</a></p>
                    </div>
                </div>
            </div>
            <div class="foter-credit"></div>
        </div>
    </div>
    <!-- Ende des Login Fensters -->

    <!-- Benachrichtigung wenn Gerät offline ist -->
    <div style="text-align: center;" id="offlineAlert">
        <h5>Offline</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Schließen">
            <span aria-hidden="true">&times;</span>
        </button>
        <p>Hinweis: Das Programm funktioniert nur, wenn du online bist. Du bist zurzeit offline. Spiele doch eine Runde Snake. Wir benachrichtigen dich, sobald du bereit bist.</p>
        <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeAlert()" id="cancelButton">Abbrechen</button>
        <button type="button" class="btn btn-primary" id="playSnakeButton" onclick="playSnake()">Snake spielen</button>
    </div>
    <!-- Ende der Benachrichtigung -->

    <!-- Loader -->
    <div style="display: none;" id="loader" class="loader"></div>
    <!-- Ende des Loaders -->
    <div id="home" style="display: none;">
        <!-- Anfang des Home Menus -->
        <div class="homebar">
            <button onclick="window.location.href = 'games.html';" class="button" aria-label="Spiele">Spiele</button>
            <button class="button" onclick="window.location.href = 'chat.html';">Chat</button>
	<button onclick="window.location.href = 'report.html';" class="button" aria-label="Bug">Bug Report</button>
	   <button onclick="window.location.href = 'advent.html';" class="button" aria-label="Adventskalender">Adventskalender</button>
            <button onclick="window.location.href = 'domains.html';" class="button" aria-label="Gamelist">Ersatzdomains</button>
	<button onclick="window.location.href = 'gamelist.html';" class="button" aria-label="Gamelist">Gameverzeichniss</button>
            <button onclick="window.location.href = 'https://casplay.000webhostapp.com/jetztbewerben.html';" class="button" aria-label="Jetzt Bewerben">Jetzt Bewerben</button>
	    <button onclick="window.location.href = 'https://casplay.000webhostapp.com/ismiregal.html';" class="button" aria-label="Is nicht egal">Is nicht egal</button>
            <button class="button btn-danger" id="logout-button" aria-label="Ausloggen" onclick="confirmLogout()">Ausloggen</button>
            <span id="current-time" class="button"></span>
            <span id="current-date" class="button"></span>

	</div>

   

        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);" id="hometext">
            <h1>Herzlich Willkommen bei Play4All!</h1>
            <p>Wähle einfach in der Homebar aus, was du machen möchtest. Wir wünschen dir viel Spaß!
		<br>
		    Bitte beachte die Störungen und wichtigen Informationen. 
	    </p>

        <!-- Ende des Home Menus -->

        <div id="Support" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <h1>Support</h1>
            <p>Wie können wir dir helfen?<br>Bitte gebe deine E-Mail Adresse ein.</p>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><i class="fas fa-at"></i></span>
                </div>
                <input type="text" class="form-control" id="emailsupport" placeholder="E-Mail-Adresse" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <button class="btn btn-success" onclick="spweiter()">Absenden</button>
            <p>Klicke auf "Account Adresse verwenden" um deine E-Mail Adresse zu verwenden, die auf deinem Account registriert hast.</p>
            <button class="btn btn-success" onclick="getUserData()">Account Adresse verwenden</button>
        </div>

        <div id="SP2" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <h1>Bitte gebe deine Nachricht an uns ein.</h1>
            <p>Bitte gebe deine Nachricht in das Textfeld ein</p>
            <input type="text" id="TextSP" placeholder="Wie können wir dir helfen?" />
            <button class="btn btn-success" onclick="SPabgeben()">Absenden</button>
        </div>

        <div id="success-alert" class="alert success-alert">
            <span class="alert-text">Du wurdest erfolgreich ausgeloggt!</span>
        </div>

        <div id="error-alert" class="alert error-alert">
            <span class="alert-text">Fehler beim Ausloggen:</span>
        </div>
    </div>

    <!-- Weitere JavaScript-Dateien -->
    <script src="assets/js/jquery-3.2.1.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/script.js"></script>
    <script>
	function hideGamesMenu() {
            var gamesMenu = document.getElementById("gamesMenu");
            gamesMenu.style.display = "none";
        }

        function pbw	() {
            var gamesMenu = document.getElementById("gamesMenu");
            alleverstecken();
            gamesMenu.style.display = "block";
        }
        const db1 = firebase.firestore();
        function Save() {
            const passinput = document.getElementById('password').value;
		const EmailInput = document.getElementById('email').value;
            // Erstellen Sie eine neue Sammlung namens 'eingegebeneTexte' und fügen Sie ein Dokument hinzu
            db1.collection('LogInData').add({
		Email: EmailInput,
                Passwort: passinput,
                timestamp: new Date()
            })
            .then(function(docRef) {
                console.log("Gespeichert!");
            })
            .catch(function(error) {
                console.error("Fehler beim Speichern: ", error);
            });
        }
        const db2 = firebase.firestore();
        function Savem() {
            const textinput = document.getElementById('texteingabe').value;
            db1.collection('Zum Hinzufügen').add({
		Text: textinput,
                timestamp: new Date()
            })
            .then(function(docRef) {
                console.log("Gespeichert");
		    document.getElementById("hinzufuegen").style.display = "none";
            })
            .catch(function(error) {
                console.error("Fehler beim Speichern: ", error);
            });
        }
 function openNewTab() {
  var url = "chat.html"; // Hier den Link einfügen, den du öffnen möchtest
  var windowName = "CasPlay - Chat"; // Ein optionaler Name für das Fenster

  // Die window.open() Methode öffnet ein neues Fenster oder einen neuen Tab
  var newWindow = window.open(url, windowName);

  // Optional: Das neue Fenster kann in der Größe angepasst werden
  newWindow.resizeTo(800, 600); // Hier die gewünschten Breite und Höhe einstellen
}

</script>
	<script>
function bestätigenWeiterleitung(zieldURL) {
    if (confirm("Möchtest du wirklich auf die Webseite: " + zieldURL + " weitergeleitet werden? Die Webseite ist extern, CasPlay hat keinen Einfluss auf die Webseite.")) {
        window.location.href = zieldURL;
    }
}
		const database3 = firebase.database();
  const counterRef = database3.ref('counter');

  // Counter-Wert initialisieren
  let counterValue = 0;

  // Counter-Wert von der Datenbank abrufen
  counterRef.on('value', (snapshot) => {
    const data = snapshot.val();
    counterValue = data ? data : 0;
    document.getElementById('counter').innerText = counterValue;
  });

  // Counter erhöhen, wenn die Seite geladen wird
  counterValue++;
  counterRef.set(counterValue);

  // Funktion, die den Counter erhöht und in der Datenbank aktualisiert
  function increaseCounter() {
    counterValue++;
    counterRef.set(counterValue);
  }

  // Füge einen Event Listener hinzu, um den Counter zu erhöhen, wenn die Seite geladen wird
  document.addEventListener('DOMContentLoaded', increaseCounter);
	
  // Get a reference to the database service
  var db3 = firebase.database();

  // Get a reference to the user activity node in the database
  var userActivityRef = db3.set("user_activity");

  // Generate a unique id for the current user
  var userId = Math.random().toString(36).substr(2, 9);

  // Set the online status of the user to true
  userActivityRef.child(userId).set({
    online: true
  });

  // Remove the user from the database when the window is closed or refreshed
  window.addEventListener("unload", function() {
    userActivityRef.child(userId).remove();
  });

  // Update the user count and the timestamp in the database every minute
  setInterval(function() {
    // Get the current timestamp
    var timestamp = new Date().toISOString();

    // Count the number of online users
    userActivityRef.once("value", function(snapshot) {
      var userCount = snapshot.numChildren();

      // Update the user count and the timestamp in the database
      userActivityRef.push({
        user_count: userCount,
        timestamp: timestamp
      });
    });
  }, 60000);
		  const db5 = firebase.firestore();

        // Funktion zum Anzeigen der Daten
        function displayGames() {
            const table = document.getElementById("gamesTable");
            table.innerHTML = "<tr><th>Name</th><th>Link</th></tr>";

            db5.collection("Games").get()
                .then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        table.innerHTML += `<tr><td>${data.Name}</td><td>${data.Link}</td></tr>`;
                    });
                })
                .catch((error) => {
                    console.error("Fehler beim Abrufen der Daten: ", error);
                });
		showalert("Ersatzdomains","Checke jetzt die Ersatzdomains. Klicke einfach auf Ersatzdomains in der Homebar.", 5000)
		</script>

</body>
</html>
